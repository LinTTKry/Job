---
description: 将我们的JS文件用不到的代码"摇"掉
---

# TreeShaking的原理

在 webpack 项目中，有一个入口文件，相当于一棵树的主干，入口文件有很多依赖的模块，相当于树枝。实际情况中，虽然依赖了某个模块，但其实只使用其中的某些功能。通过 tree-shaking，将没有使用的模块摇掉，这样来达到删除无用代码的目的。

&#x20;Tree Shanking 依赖于 **ES6 import 和 export** 静态分析能力，可以在**编译阶段**将**不会被执行，执行的结果不会被用到，代码只会影响死变量（只写不读）**的代码移除。

### tree-shaking的消除原理是依赖于ES6的模块特性：

* 只能作为模块顶层的语句出现（import）
* import 的模块名只能是字符串常量
* import binding 是 immutable的

ES6模块依赖关系是确定的，和运行时的状态无关，可以进行可靠的静态分析，故而可以在编译时正确判断到底加载了什么代码，这就是tree-shaking的基础。

